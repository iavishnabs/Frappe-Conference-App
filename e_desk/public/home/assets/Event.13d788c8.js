import{r as C,b as S,g as B,u as q,o as u,c,a as l,F as R,h as I,t as D,e as t,s as T,i as n,w as f,j as P,k as g,l as V,D as L,m as G,n as j,p as U,q as b,f as F,v as z,x as M,y as O,d as H,z as Q}from"./index.dcef67c0.js";import{F as J}from"./FileUploader.16219466.js";const Y={class:"border-b-2 w-full h-[70px] flex lg:justify-around justify-between items-center fixed"},A={class:"object-contain h-10 w-20 sm:h-12 sm:w-28 lg:h-14 lg:w-32"},K=["src"],W={class:"lg:flex hidden justify-center items-center"},X={class:"flex justify-center items-center gap-6 text-sm hover:cursor-pointer"},Z=["onClick"],ee={key:0,class:"rounded-full flex justify-center items-center"},te=["src"],le={key:1},oe={class:"rounded-full flex justify-center items-center w-7 h-7 bg-gray-300"},se={class:"lg:hidden w-[20px] mr-10"},ae={__name:"Navbar",props:{user:Object},emits:["toggle-dialog"],setup(h,{emit:o}){const p=C([]),v=C(""),r=S({url:"e_desk.e_desk.api.frontend_api.get_navbar_items",method:"GET",onSuccess(m){console.log("Navbar API Response:",m),m!=null&&m.top_bar_items&&(p.value=m.top_bar_items),m!=null&&m.logo&&(v.value=m.logo)}});B(()=>{r.fetch()});const k=o;q();const w=()=>{k("toggle-dialog")},y=()=>{T.logout.fetch()},_=()=>{window.location.href="/login?redirect-to=/app"},d=()=>{window.location.href="/app"},x=m=>{!m||(window.location.href=m)},s=()=>{window.location.href=window.location.origin+"/sponsors"};return(m,a)=>(u(),c("div",Y,[l("div",A,[l("img",{src:v.value,alt:"Logo",class:"h-12 object-contain"},null,8,K)]),l("div",W,[l("ul",X,[(u(!0),c(R,null,I(p.value,e=>(u(),c("li",{key:e.label,class:"hover:overline decoration-4 decoration-red-800",onClick:i=>x(e.url)},D(e.label),9,Z))),128)),t(T).isLoggedIn?(u(),c("li",ee,[n(t(L),{options:[{label:"Profile",onClick:w,icon:()=>V(t(g),{name:"user"})},{label:"Switch to Desk",icon:()=>V(t(g),{name:"grid"}),onClick:d},{label:"Log out",icon:()=>V(t(g),{name:"log-out"}),onClick:y}]},{default:f(()=>[n(t(P),null,{icon:f(()=>[h.user&&h.user.user_image?(u(),c("img",{key:0,src:h.user.user_image,alt:"User Image",class:"rounded-full w-7 h-7"},null,8,te)):(u(),c("div",le,[l("div",oe,[n(t(g),{name:"more-horizontal",class:"h-4 w-4"})])]))]),_:1})]),_:1},8,["options"])])):(u(),c("li",{key:1,class:"hover:overline decoration-4 decoration-red-800",onClick:_}," Login "))])]),l("div",se,[n(t(L),{options:[{group:"Menu",items:[{label:"Home",icon:()=>V(t(g),{name:"home"})},{label:"Sponsors",icon:()=>V(t(g),{name:"dollar-sign"}),onClick:()=>s()},t(T).isLoggedIn?{label:"Switch to Desk",icon:()=>V(t(g),{name:"grid"}),onClick:d}:{label:"Log in",icon:()=>V(t(g),{name:"log-in"}),onClick:_}]}],class:"mr-10"},{default:f(()=>[n(t(P),null,{icon:f(()=>[n(t(g),{name:"menu",class:"h-5 w-5"})]),_:1})]),_:1},8,["options"])])]))}};var ne="/assets/e_desk/home/bg.png";function ie(h,o){const p={month:"short",day:"numeric",year:"numeric"},v=new Date(h),r=new Date(o);v.getDate();const k=r.getDate(),w=new Intl.DateTimeFormat("en-US",{month:"short",day:"numeric"}),y=new Intl.DateTimeFormat("en-US",{year:"numeric"});if(v.getMonth()===r.getMonth()&&v.getFullYear()===r.getFullYear())return`${w.format(v)} \u2013 ${k}, ${y.format(r)}`;{const _=new Intl.DateTimeFormat("en-US",p),d=new Intl.DateTimeFormat("en-US",p);return`${_.format(v)} \u2013 ${d.format(r)}`}}const re={class:"flex flex-col xl:flex-row justify-between xl:mx-64 mt-36 mb-28"},ue={class:"xl:block flex items-center flex-col w-full xl:w-1/2"},de={class:"flex flex-col gap-5"},me={class:"font-bold",style:{"font-size":"45px"}},ce={class:"flex gap-2"},fe={class:"flex gap-2"},pe={key:0,class:"border-2 p-2 w-fit hover:cursor-not-allowed"},ve={class:"w-full sm:flex sm:justify-center sm:items-center xl:block xl:w-1/2"},_e={class:"sm:w-3/6 xl:w-full"},ge=["src"],be={class:"flex flex-col gap-5"},he={class:"flex gap-5"},ye={class:"flex gap-5"},xe={class:"flex gap-5"},ke={class:"w-1/2"},we={class:"w-1/2"},Ve={class:"flex gap-5"},Ce={class:"w-1/2"},$e={class:"w-1/2"},De={class:"flex"},Se={key:0},Ue={key:1},Pe={key:2},je={key:3},Te={class:"w-full flex justify-between"},Fe={__name:"Banner",props:{event:Object},setup(h){const o=C({first_name:"",last_name:"",mobile:"",email:"",prifix:"",bussines:"",role:"",chapter:"",image:""}),p=C(!1),v=G.exports.useToast(),r=h,k=j(()=>ie(r.event.start_date,r.event.end_date)),w=()=>{let a=[];return o.value.first_name.trim()||a.push("First Name is required"),o.value.last_name.trim()||a.push("Last Name is required"),o.value.mobile.trim()||a.push("Mobile Phone is required"),o.value.email.trim()||a.push("Email is required"),o.value.prifix||a.push("Prefix is required"),o.value.bussines||a.push("Business Category is required"),o.value.role||a.push("Role is required"),o.value.chapter||a.push("Chapter is required"),a.length>0?(a.forEach(e=>v.warning(e)),!1):!0},y=j(()=>r.event.start_date?new Date(r.event.start_date).toLocaleString("en-US",{hour:"numeric",minute:"numeric",hour12:!0}):"");let _=S({url:"e_desk.e_desk.api.frontend_api.Getlist",method:"GET",makeParams(){return{doctype:["Business Category","Salutation","Chapter","Roles"]}},onSuccess(a){console.log(a,"Response from server"),p.value=!0}});const d=()=>{_.fetch()},x=()=>{if(!w())return;o.value.confer=r.event.name,S({url:"e_desk.e_desk.api.frontend_api.ParticipantCreate",method:"POST",makeParams(){return{data:o.value}},onSuccess(e){console.log(e,"Response from server"),e.status!=200?v.warning(e.message):(v.success(e.message),setTimeout(()=>{p.value=!1},3e3))}}).fetch()};let s={Business:{},Category:{},Roles:{},Salutation:{},Chapter:{}};const m=j(()=>_.data&&typeof _.data=="object"?(console.log("Structured list with label and value:",_.data),_.data):s);return(a,e)=>(u(),c(R,null,[l("div",re,[l("div",ue,[l("div",de,[l("p",me,D(h.event.name),1),l("p",ce,[n(t(g),{class:"w-5 h-5",name:"calendar"}),U(" "+D(k.value)+" ",1),n(t(g),{class:"w-5 h-5",name:"clock"}),U(" "+D(y.value),1)]),l("p",fe,[n(t(g),{class:"w-5 h-5",name:"map-pin"}),U(" "+D(h.event.venuelocation),1)]),new Date(h.event.registration_close_date)<new Date?(u(),c("p",pe," Event has ended ")):(u(),c("p",{key:1,class:"border-2 p-2 w-fit hover:cursor-pointer bg-red-600 text-white rounded-md",onClick:d}," Register Now "))])]),l("div",ve,[l("div",_e,[l("img",{src:h.event.event_image,alt:"Conference Image"},null,8,ge)])])]),e[14]||(e[14]=l("div",null,[l("img",{class:"",src:ne,alt:"Background Image"})],-1)),n(t(z),{modelValue:p.value,"onUpdate:modelValue":e[10]||(e[10]=i=>p.value=i)},{"body-title":f(()=>e[11]||(e[11]=[l("h3",null,"Register",-1)])),"body-content":f(()=>[l("div",be,[l("div",he,[n(t(b),{type:"text",size:"sm",variant:"subtle",placeholder:"First Name",disabled:!1,label:"First Name",modelValue:o.value.first_name,"onUpdate:modelValue":e[0]||(e[0]=i=>o.value.first_name=i)},null,8,["modelValue"]),n(t(b),{type:"text",size:"sm",variant:"subtle",placeholder:"Last Name",disabled:!1,label:"Last Name",modelValue:o.value.last_name,"onUpdate:modelValue":e[1]||(e[1]=i=>o.value.last_name=i)},null,8,["modelValue"])]),l("div",ye,[n(t(b),{type:"text",size:"sm",variant:"subtle",placeholder:"Mobile",disabled:!1,label:"Mobile Phone",modelValue:o.value.mobile,"onUpdate:modelValue":e[2]||(e[2]=i=>o.value.mobile=i)},null,8,["modelValue"]),n(t(b),{type:"text",size:"sm",variant:"subtle",placeholder:"Email",disabled:!1,label:"Email",modelValue:o.value.email,"onUpdate:modelValue":e[3]||(e[3]=i=>o.value.email=i)},null,8,["modelValue"])]),l("div",xe,[l("div",ke,[n(t(b),{type:"autocomplete",options:m.value.Salutation,size:"sm",variant:"subtle",placeholder:"Prefix",disabled:!1,label:"Prefix",modelValue:o.value.prifix,"onUpdate:modelValue":e[4]||(e[4]=i=>o.value.prifix=i)},null,8,["options","modelValue"])]),l("div",we,[n(t(b),{type:"autocomplete",options:m.value["Business Category"],size:"sm",variant:"subtle",placeholder:"Business Category",disabled:!1,label:"Business Category",modelValue:o.value.bussines,"onUpdate:modelValue":e[5]||(e[5]=i=>o.value.bussines=i)},null,8,["options","modelValue"])])]),l("div",Ve,[l("div",Ce,[n(t(b),{type:"autocomplete",options:m.value.Roles,size:"sm",variant:"subtle",placeholder:"Role",disabled:!1,label:"Role",modelValue:o.value.role,"onUpdate:modelValue":e[6]||(e[6]=i=>o.value.role=i)},null,8,["options","modelValue"])]),l("div",$e,[n(t(b),{type:"autocomplete",options:m.value.Chapter,size:"sm",variant:"subtle",placeholder:"Chapter",disabled:!1,label:"Chapter",modelValue:o.value.chapter,"onUpdate:modelValue":e[7]||(e[7]=i=>o.value.chapter=i)},null,8,["options","modelValue"])])]),n(t(J),{fileTypes:["image/*"],validateFile:i=>{},onSuccess:e[8]||(e[8]=i=>{console.log(i),o.value.image=i})},{default:f(({file:i,uploading:E,progress:$,uploaded:He,message:Qe,error:Je,total:Ye,success:Ae,openFileSelector:N})=>[n(t(P),{onClick:N,loading:E,class:"bg-green"},{default:f(()=>[l("div",De,[$==100?(u(),c("p",Se," Uploaded ")):$>0&&$<100?(u(),c("p",Ue," Uploading ")):(u(),c("p",Pe," Upload ")),$>0&&$<100?(u(),c("p",je,D($)+"% ",1)):F("",!0)])]),_:2},1032,["onClick","loading"])]),_:1})])]),actions:f(()=>[l("div",Te,[n(t(P),{class:"ml-2",onClick:e[9]||(e[9]=i=>p.value=!1)},{default:f(()=>e[12]||(e[12]=[U(" Close ")])),_:1}),n(t(P),{variant:"solid",onClick:x},{default:f(()=>e[13]||(e[13]=[U(" Confirm ")])),_:1})])]),_:1},8,["modelValue"])],64))}},Re={class:"h-[75px]"},Le={key:0},ze={key:0,class:""},Ee={class:"grid gap-2 sm:grid-cols-2 grid-cols-1"},Ne={class:"flex justify-center items-end"},Be={key:0},qe={key:1},Ie={key:1,class:"w-full h-[200px] flex justify-center"},Ge=["src"],Me={key:2},Oe={class:"flex justify-center"},Xe={__name:"Event",setup(h){const o=M(),p=C(!1),v=C(!0),r=C(!1),k=S({url:"e_desk.e_desk.api.frontend_api.GetValue",method:"GET",makeParams(){return{doctype:"Confer",filter:JSON.stringify({name:o.params.id}),field:["name","start_date","end_date","venuelocation","event_image","registration_close_date"],dict:!0}},auto:!0,onSuccess(){v.value=!1}});let w=j(()=>!v.value&&k.data&&typeof k.data=="object"?k.data:null);const y=S({url:"e_desk.e_desk.api.frontend_api.GetValue",method:"GET",makeParams(){return{doctype:"User",filter:JSON.stringify({name:T.user}),field:["user_image","participant_id"],dict:!0}},auto:!0});let _=j(()=>y.data&&typeof y.data=="object"?y.data:null);const d=C(null);return O(()=>{var x;return(x=_.value)==null?void 0:x.participant_id},x=>{x&&S({url:"e_desk.e_desk.api.frontend_api.GetDoc",method:"GET",makeParams(){return{doctype:"Participant",name:x}},auto:!0,onSuccess(s){console.log("Participant data:",s),d.value=s},onError(s){console.error("Error fetching participant data:",s)}})},{immediate:!0}),(x,s)=>{const m=Q("Button");return u(),c(R,null,[l("div",Re,[n(ae,{onToggleDialog:s[0]||(s[0]=a=>p.value=!0),user:t(_)},null,8,["user"])]),t(w)?(u(),c("div",Le,[n(Fe,{event:t(w)},null,8,["event"]),n(t(z),{modelValue:p.value,"onUpdate:modelValue":s[8]||(s[8]=a=>p.value=a)},{"body-title":f(()=>s[9]||(s[9]=[l("h3",null,"Profile",-1)])),"body-content":f(()=>[l("div",null,[d.value&&!r.value?(u(),c("div",ze,[l("div",Ee,[n(t(b),{type:"text",ref_for:!0,size:"xl",variant:"subtle",placeholder:"Placeholder",disabled:!0,label:"Name:",modelValue:d.value.first_name,"onUpdate:modelValue":s[1]||(s[1]=a=>d.value.first_name=a)},null,8,["modelValue"]),l("div",Ne,[n(m,{variant:"solid",onClick:s[2]||(s[2]=a=>r.value=!r.value)},{default:f(()=>[r.value?(u(),c("span",Be," Hide Qr ")):(u(),c("span",qe," View Qr "))]),_:1})]),n(t(b),{type:"text",ref_for:!0,size:"xl",variant:"subtle",placeholder:"Placeholder",disabled:!0,label:"Business Category:",modelValue:d.value.business_category,"onUpdate:modelValue":s[3]||(s[3]=a=>d.value.business_category=a)},null,8,["modelValue"]),n(t(b),{type:"text",ref_for:!0,size:"xl",variant:"subtle",placeholder:"Placeholder",disabled:!0,label:"Chapter:",modelValue:d.value.chapter,"onUpdate:modelValue":s[4]||(s[4]=a=>d.value.chapter=a)},null,8,["modelValue"]),n(t(b),{type:"text",ref_for:!0,size:"xl",variant:"subtle",placeholder:"Placeholder",disabled:!0,label:"Email:",modelValue:d.value.e_mail,"onUpdate:modelValue":s[5]||(s[5]=a=>d.value.e_mail=a)},null,8,["modelValue"]),n(t(b),{type:"text",ref_for:!0,size:"xl",variant:"subtle",placeholder:"Placeholder",disabled:!0,label:"Mobile:",modelValue:d.value.mobile_number,"onUpdate:modelValue":s[6]||(s[6]=a=>d.value.mobile_number=a)},null,8,["modelValue"])])])):d.value&&r.value?(u(),c("div",Ie,[l("img",{src:d.value.qr,alt:""},null,8,Ge)])):(u(),c("p",Me,"Loading participant data..."))])]),actions:f(()=>[l("div",Oe,[r.value?(u(),H(m,{key:0,variant:"solid",onClick:s[7]||(s[7]=a=>r.value=!r.value)},{default:f(()=>s[10]||(s[10]=[l("span",null," Hide Qr ",-1)])),_:1})):F("",!0)])]),_:1},8,["modelValue"])])):F("",!0)],64)}}};export{Xe as default};
